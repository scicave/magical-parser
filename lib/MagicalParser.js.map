{"version":3,"sources":["webpack://MagicalParser/webpack/universalModuleDefinition","webpack://MagicalParser/webpack/bootstrap","webpack://MagicalParser/./src/Node.js","webpack://MagicalParser/./src/Parser.js","webpack://MagicalParser/./src/blocks.js","webpack://MagicalParser/./src/customParsers/index.js","webpack://MagicalParser/./src/customParsers/math.js","webpack://MagicalParser/./src/environments.js","webpack://MagicalParser/./src/errors.js","webpack://MagicalParser/./src/global.js","webpack://MagicalParser/./src/index.js","webpack://MagicalParser/./src/operators.js"],"names":["Node","type","args","attributes","Object","assign","Array","argsCount","length","type_","name","Parser","env","options","setEnvironment","__randomNameNum","__realPos","_environment","_options","nameTest","scope","forbiddenChars","operator","suffixOperators","prefixOperators","separators","blocks","environments","get","op","suffixOperator","prefixOperator","separator","undefined","found","arr","all","replace","RegExp","regex","match","index","parseInt","splice","push","str","operations","snode","Map","__clonedStr","i","contains","sendError","autoMultSign","__parseBlocks","search","_args","calls","vars","find","a","sn","set","__parseOpertors","__parse","parseBlocks","parseOperators","subOptions","parseBLocks","opName","sNode","pathTOme","funcName","funcArgs","_arg","func","extension","parse","dotType","fullName","id","first","value","notNum","Error","that","__parseBlock__","str_","getRandomName","b","openedBlock","ref","searchingTxt","openingChar","closingChar","snChild","handleContent","content","opened","closing","__parseBlocks__","i_intial","values","slice","iof","indexOf","mayCloseAt","num","mustOpen","opening","_str","checker","check","contentTest","new_i","mustClose","s","test","__get","strs","split","argTest","numTest","allRegex","operators","intialSearch","finalSearch","prevArg","prefix","arg","c","isNaN","suffix","console","prepareOptions","block","_id","val","regexStr","toString","regSpecialChars","_contentTest","Math","CustomMathParser","zIndex","__parseOperators","parseFloat","operationTestReg","nameTestReg","repBlock","opIntialTestReg","end","opTestReg","opFinalTestReg","g1","g2","arg1","arg2","forbiddenSymbolsError","msg","pos","position","messsege","operatorsError","blocksError","strTOreg","specialRegex","symbols","isSymbol","isEmoji","isWhiteSpace","isNum","isAlpha","spaced","isVarName","isvarname","log","fill","join","Errors","processArr","_all","repeated","opIndex","numTestReg","argTestReg","operationTest","sort","containedStr","Date","now","randomNameNum","require","CustomParsers","MagicalParser","module","exports","commonOperator","right","left","_spaced"],"mappings":"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","file":"MagicalParser.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MagicalParser\"] = factory();\n\telse\n\t\troot[\"MagicalParser\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","\r\n/**\r\n   sNode stands for structural node, used to represent the structure of the input text.,,,\r\n   you can use the result (which is tree node of sNode with particular properities to do incredible things),\r\n   it is used as a parse in mathpackage: {<https://github.com/ms2052001/mathpackage>}\r\n*/\r\n\r\nexport default class Node {\r\n   /**\r\n    * @param {string} type is a on of these\r\n    *  'id', 'func', 'num', 'bool_op', 'binray_op', 'bool', op = {'+', '-', '*', '/', '^', '=', ...}\r\n    * \r\n    * @param {*} args array of sNode\r\n    * @param {*} attributes object contains attributes names and values.\r\n    */\r\n   constructor(type, args = [], attributes = {}) {\r\n      Object.assign(this, attributes);\r\n      this.args = args instanceof Array ? args : [args];\r\n      this.type = type;\r\n      // if (type === 'op') {\r\n      //    let boolOps = ['and', 'or', 'xor', 'not', '&&', '||', '!'];\r\n      //    if (this.__contains(this.name, ...boolOps)) {\r\n      //       this.type = 'bool_op';\r\n      //    }\r\n      //    else if (this.name == ' ==') {\r\n      //       this.type = 'assign_op';\r\n      //    }\r\n      //    else {\r\n      //       this.type = type;\r\n      //    }\r\n      // } else {\r\n      //    this.type = type;\r\n      // }\r\n      // if (this.type === 'id') {\r\n      //    if (this.name === 'true' || this.name === 'false') {\r\n      //       this.type = 'bool';\r\n      //    }\r\n      // }\r\n   }\r\n\r\n   get isLiteral() {\r\n      return this.type === 'literal';\r\n   }\r\n\r\n   calls(type, argsCount = this.args.length, type_ = this.type) {\r\n      return (this.type === type || (this.type === 'func' && this.name === type) || (this.type === 'op' && this.name === type)) && this.args.length === argsCount && this.type === type_;\r\n   }\r\n\r\n}\r\n","/**\r\n * here is the flow chart of the algorithms::: {<https://www.lucidchart.com/invitations/accept/1c02df38-de1b-48da-8942-652652d373ea>}\r\n * \r\n * options include:\r\n * functions:: if is is applied the expr \" 1 + rg(2)\" will be considered as \" 1 + rg*(2)\", thus rg is constants, here we sill consider the functions you insert in addtion to the common functions such as ['sin', 'cos', ...]\r\n *\r\n * operators search regex at regexr.com \"https://regexr.com/4tbfe\"\r\n\r\n */\r\n\r\n// import sNode from './sNode';\r\nimport environments from './environments.js';\r\nimport Node from './Node.js';\r\nimport { checker, sendError, prepareOptions, getRandomName, contains } from './global.js';\r\nimport { operator, separator, prefixOperator, suffixOperator } from './operators.js';\r\n\r\nexport default class Parser {\r\n\r\n   constructor(env = 'math', options = {}) {\r\n      this.setEnvironment(env, options);\r\n      this.__randomNameNum = 0;\r\n      this.__realPos = 0;\r\n   }\r\n\r\n   //#region getter, setter\r\n\r\n   get environment() {\r\n      return this._environment;\r\n   }\r\n   set environment(env) {\r\n      console.Error('You can not set environment property directly, use setEnvironment instead.');\r\n   }\r\n   setEnvironment(env, options) {\r\n      this._environment = env;\r\n\r\n      this._options = {\r\n         nameTest: '[_a-zA-Z]+\\\\d*',\r\n         scope: [],\r\n         forbiddenChars: [],\r\n         operator: [],\r\n         suffixOperators: [],\r\n         prefixOperators: [],\r\n         separators: [],\r\n         blocks: [],\r\n         ...environments.get(env)\r\n      };\r\n\r\n      if (options)\r\n         this.options = options; /// adjustments and computations will occur here\r\n   }\r\n\r\n   get options() {\r\n      return this._options;\r\n   }\r\n   set options(options) {\r\n      options = Object.assign(this._options, options); /// make this._options a reference for options\r\n      prepareOptions(options);\r\n   }\r\n\r\n   setOperator(op, type) {\r\n      if (!type) {\r\n         if (op instanceof operator) {\r\n            type = 'operators';\r\n         }\r\n         else if (op instanceof suffixOperator) {\r\n            type = 'suffixOperator';\r\n         }\r\n         else if (op instanceof prefixOperator) {\r\n            type = 'prefixOperator';\r\n         }\r\n         else if (op instanceof separator) {\r\n            type = 'separator';\r\n         } else {\r\n            return undefined;\r\n         }\r\n      }\r\n      let found = false,\r\n         arr = this.options[type];\r\n      this.options.all[type] = this.options.all[type].replace(new RegExp(` \\\\(@(${op.regex}),#(\\\\d*)\\\\) `), (match, name, index) => {\r\n         // you are trying to add a n already existed operator,\r\n         found = true;\r\n         Object.assign(op, arr[parseInt(index)]);\r\n         arr.splice(parseInt(index), 1);\r\n         arr.push(op);\r\n         return ` (@${op.regex},#${arr.length}) `;\r\n      });\r\n      if (!found) {\r\n         arr.push(op);\r\n         this.options.all[type] += `(@${op.name},#${arr.length}) `;\r\n      }\r\n   }\r\n   removeOperator(name, type) {\r\n      this.options.all[type] = this.options.all[type].replace(new RegExp(` \\\\(@(${name}),#(\\\\d*)\\\\) `), (match, name, index) => {\r\n         // you are trying to add a n already existed operator,\r\n         this.options[type].splice(parseInt(index), 1);\r\n         return ``;\r\n      });\r\n   }\r\n\r\n   //#endregion\r\n\r\n   /**\r\n    * \r\n    * @param {string} str the string to be parsed \r\n    * @param {object} options if you want to override the aleardy existing options\r\n    * @param {array} operations \r\n    */\r\n   parse(str, operations = null) {\r\n\r\n      var options = this.options;\r\n      var forbiddenChars = options.forbiddenChars;\r\n      var snode;\r\n\r\n      operations = operations instanceof Map ? operations : new Map();\r\n      this.__clonedStr = str; this.__realPos = 0;\r\n\r\n      //#region pre codes\r\n\r\n      // checking errors\r\n      for (let i = 0; i < forbiddenChars.length; i++) {\r\n         if (contains(str, forbiddenChars[i])) sendError('forbidden char ' + forbiddenChars[i]);\r\n      }\r\n\r\n      if (options.autoMultSign) {\r\n         /// var( => var*( /// -.023 var => -.023 var /// -564.012345(...) => -564.012345*(...)\r\n         str = str.replace(new RegExp('((?:-?\\\\d+\\\\.?\\\\d*)|(?:-?\\\\d*\\\\.?\\\\d+))\\\\s*(\\\\(|' + options.nameTest + ')', 'g'), '$1 * $2');\r\n         /// the code beneath will be exuted in replacing funcName##funcArgsName## with funcName##funcArgsName##\r\n         // str = str.replace(new RegExp(`(${options.nameTest})\\\\s*\\\\(`, 'g'), (match, g) => {\r\n         // });\r\n      }\r\n\r\n      // if empty of characters\r\n      str = str.replace(/^\\s*$/, () => {\r\n         snode = new Node('');\r\n      }); if (snode) return snode;\r\n\r\n      str = this.__parseBlocks(str, operations);\r\n\r\n      // after processing brackets, search for functions\r\n      str = str.replace(new RegExp(`(${options.nameTest})\\\\s*(##${options.nameTest}##)`, 'g'), (match, name, args) => {\r\n         if (options.all.prefixOperators.search(new RegExp(` \\\\(@(${name}),#(\\\\d*)\\\\) `)) > -1) {\r\n            // let _arg = operations.get(args);\r\n            // let sn = new sNode('prefixOperator', _arg, { name });\r\n            // operations.set(name, sn);\r\n            return match;\r\n         } else {\r\n            let _args = operations.get(args);\r\n            if (_args.calls('()')) {\r\n               if (options.vars.find(a => a === name)) {\r\n                  let sn = new Node('operator', [new Node('var', [], { name }), _args], { name: '*' });\r\n                  operations.set(args, sn);\r\n                  return name + ' * ' + args;\r\n               }\r\n\r\n               let sn = new Node('implementFunction', _args.args, { name });\r\n               operations.set(args, sn);\r\n               return args; /// replace \"name  ##funcArrgsName##\" with \"##funcArrgsName##\" + setting the value to the corresponding key in \"operations\"\r\n            } else {\r\n               return match;\r\n            }\r\n         }\r\n      });\r\n\r\n      str = this.__parseOpertors(str, operations);\r\n\r\n      //#endregion\r\n\r\n      this.__parse(str, options, operations, { parseBlocks: false, parseOperators: false });\r\n\r\n   }\r\n   __parse(str, options, operations, subOptions = {}) {\r\n\r\n      subOptions = { parseBlocks: true, parseOperators: true, ...subOptions }; /// or use Object.assign\r\n      let snode;\r\n\r\n      if (subOptions.parseBLocks) {\r\n         str = this.__parseBlocks(str, operations);\r\n      }\r\n      if (subOptions.parseOperators) {\r\n         str = this.__parseBlocks(str, operations);\r\n      }\r\n\r\n      //#region final codes\r\n\r\n      // if empty of characters\r\n      str = str.replace(/^\\s*$/, () => {\r\n         snode = new Node('');\r\n      }); if (snode) return snode;\r\n\r\n\r\n      // if name of operation\r\n      str = str.replace(new RegExp(`^\\\\s*(##${options.nameTest}##)\\\\s*$`), (match, opName) => {\r\n         snode = operations.get(opName).sNode;\r\n      });\r\n      if (snode) return snode;\r\n\r\n      // something.abc.funcName(arg1, ...)\r\n      str = str.replace(new RegExp(`^\\\\s*(${options.nameTest}\\\\s*\\\\.\\\\s*)+(?:(${options.nameTest})\\\\s*(##${options.nameTest}##))\\\\s*$`), (match, pathTOme, funcName, funcArgs) => {\r\n         let args = operations.get(funcArgs);\r\n         if (options.all.prefixOperators.search(new RegExp(` \\\\(@(${name}),#(\\\\d*)\\\\) `)) > -1) {\r\n            let _arg = operations.get(args);\r\n            let sn = new Node('prefixOperator', _arg, { name });\r\n            operations.set(name, sn);\r\n         }\r\n         else if (args.sNode.calls('()')) {\r\n            let func;\r\n            let extension = this.parse(pathTOme, operations);\r\n            func = new Node('implementFunction', args.sNode.args, { name: funcName }); // args.sNode.args the args of the bracket  it may be one or more;\r\n            snode = new Node('.', [extension, func], { dotType: 'function', fullName: pathTOme + funcName });\r\n         }\r\n      });\r\n      if (snode) return snode;\r\n\r\n      //something.id\r\n      str = str.replace(/^\\s*(.*)\\.(\\$\\$[_a-zA-z]+\\d*\\$\\$)\\s*$/, (match, pathTOme, id) => {\r\n         if (match) {\r\n            snode = new Node('.', [this.parse(first, operations), new Node('id', [], {\r\n               name: id\r\n            })], {\r\n               dotType: 'id',\r\n               extension: match\r\n            });\r\n         }\r\n      });\r\n      if (snode) return snode;\r\n\r\n      // if literal, number or variable or bool {true or false}, ...\r\n\r\n      str = str.replace(/^\\s*(([_a-zA-z]+)\\d*)\\s*$/, (match, value, notNum) => {\r\n         if (match) {\r\n            snode = new Node(notNum ? 'id' : 'num', [], { value: value });\r\n         }\r\n      });\r\n      if (snode) return snode;\r\n\r\n      str = str.replace(/^(-?\\d+\\.?\\d*)|(-?\\d*\\.?\\d+)$/, (match, value, notNum) => {\r\n         if (match) {\r\n            snode = new Node(notNum ? 'id' : 'num', [], { value: value });\r\n         }\r\n      });\r\n      if (snode) return snode;\r\n\r\n      throw new Error('invalid script.\\n' + str); // this shouldn't happen in ordinary cases, but this line of code is here for avoiding any flaw out of measurements\r\n\r\n      //#endregion\r\n\r\n   }\r\n   __parseBlocks(str, options, operations) {\r\n\r\n      //#region brackets\r\n      var that = this;\r\n      var blocks = options.blocks;\r\n\r\n      let __parseBlock__ = (index, str_) => {\r\n         //// checking error,,, this ill be done on handling bracket's content, so don't do for this. \r\n         let name = getRandomName();\r\n\r\n         // let str_ = str.slice(index.opening, index.closing); /// cut the text from the next sibiling of the opening char until the current closingChar index\r\n         let b = blocks.openedBlock.ref;\r\n         let searchingTxt = b.openingChar + str_ + b.closingChar;\r\n         str = str.replace(searchingTxt, name); // if the replacement is global or not, there will no be any problem unless the developer using this library set a block with the same features as the bolck of our operation name.\r\n\r\n         let snChild;\r\n         if (b.handleContent) {\r\n            snChild = that.parse(str_); /// here you are parsing new string with no operations yet. /// getting the sNode from the string inside this bracket block with the same procedures, there is no need to pass operations as argument\r\n         } else {\r\n            snChild = new Node('undefined', [], { content: str_ }); /// getting the sNode from the string inside this bracket block with the same procedures, there is no need to pass operations as argument\r\n         }\r\n         let sn = new Node('block', [snChild], { openingChar: b.openingChar, closingChar: b.closingChar, name: b.name });\r\n         operations.set(name, sn);\r\n\r\n         b.opened = false; blocks.openedBlock = null; // reset\r\n\r\n         return index.closing + (name.length - searchingTxt.length); /// new_i /// setting the index, as the string may shrink or be taller, it depends on the length of the name\r\n      };\r\n\r\n      let __parseBlocks__ = (i_intial = 0) => {\r\n         for (let i = i_intial; i < str.length; i++) {\r\n            if (this.__realPos || this.__realPos === 0) this.__realPos += 1; // dealing with the intial str be fore the parsing process\r\n            for (let b of blocks.values) {\r\n               /// if a block is opened, closing has the priority, unless, opening has the priority::: you can notice this in ***Mohammed***, if you check the opening char first the num will increase to 2, thus the block will not be closed,,, and an error will occur.\r\n               if (blocks.openedBlock) {\r\n                  if (str.slice(i, i + b.closingChar.length) === b.closingChar) {\r\n                     if (b !== options.blocks.openedBlock.ref) {\r\n\r\n                        let iof = options.blocks.openedBlock.ref.openingChar.indexOf(b.openingChar);\r\n                        if (iof > -1) {\r\n                           // options.blocks.openedBlock.ref.openingChar  contains  b.closingChar::: for example *** contains **, you can use these blocks formatting typing, **Mohammed** will be bold.\r\n                           options.blocks.openedBlock.mayCloseAt = { ref: b, index: i, iof };\r\n                        } else {\r\n                           b.num--;\r\n                        }\r\n\r\n                     } else {\r\n                        b.num--;\r\n                     }\r\n                  } else if (str.slice(i, i + b.openingChar.length) === b.openingChar) {\r\n                     b.num++;\r\n                     i += b.openingChar.length - 1; // -1 here as for loop will add 1 to i, I want to set the index just after the opening char \r\n                     this.__realPos += b.openingChar.length - 1;\r\n                  }\r\n               } else {\r\n                  if (str.slice(i, i + b.openingChar.length) === b.openingChar) {\r\n                     b.num++;\r\n                     i += b.openingChar.length - 1; // -1 here as for loop will add 1 to i, I want to set the index just after the opening char \r\n                     this.__realPos += b.openingChar.length - 1;\r\n                     // if (!blocks.openedBlock) { /// if not open, then open\r\n                     b.opened = true;\r\n                     blocks.openedBlock = { ref: b, index: i };\r\n                     // }\r\n                  } else if (str.slice(i, i + b.closingChar.length) === b.closingChar) {\r\n                     b.num--;\r\n                  }\r\n               }\r\n\r\n               /// when a bracket is close, but not opened. e.g. ::: \" 1+2-5) \"\r\n               if (b.num < 0) {\r\n                  if (b.mustOpen) {\r\n                     sendError('closing a block not opened.');\r\n                  } else {\r\n                     b.num = 0;\r\n                  }\r\n               }\r\n\r\n               /// if true, the bracket's block is defined.\r\n               if (b.num === 0 && b.opened) { /// may other brackets' num be zero, as it does not exist or as it is closed but it closed inside the block that we are setting,,, e.g.::: \" 1+2({1,2,3}^-1) \"\r\n                  let index = {\r\n                     opening: blocks.openedBlock.index + blocks.openedBlock.ref.openingChar.length,\r\n                     closing: i\r\n                  };\r\n                  let _str = str.slice(index.opening, index.closing);\r\n                  if (checker.check(_str, b.contentTest)) {\r\n                     i = __parseBlock__(index, _str); /// __parseBlock__ returns the new_i\r\n                  } else {\r\n                     b.num++; // the considered closingChar found is not compatible, so continue shearching for another closing char\r\n                  }\r\n               }\r\n            }\r\n         }\r\n      };\r\n      __parseBlocks__();\r\n      /// after finishing looping searching for brackets blocks, oooops, what is this?!!!, oh, the bracket is not closed. send an error\r\n      if (blocks.openedBlock) {\r\n         if (blocks.openedBlock.mayCloseAt) {\r\n            let index = {\r\n\r\n               opening:\r\n                  blocks.openedBlock.index +\r\n                  // blocks.openedBlock.mayCloseAt.ref.openingChar.length +    this will be added later\r\n                  blocks.openedBlock.mayCloseAt.iof,\r\n\r\n               closing: blocks.openedBlock.mayCloseAt.index\r\n\r\n            };\r\n            /// the openingChar can be for another block e.g.::: (( and (,when we close with )) the blocks is ((content)), otherwise if we close with ) our block is (content) and the second \"(\" is the first char in the content \r\n            blocks.openedBlock.ref.opened = false;\r\n            blocks.openedBlock.ref.num = 0;\r\n            blocks.openedBlock = { ref: blocks.openedBlock.mayCloseAt.ref, index: index.opening };\r\n            index.opening += blocks.openedBlock.mayCloseAt.ref.openingChar.length;\r\n\r\n            let _str = str.slice(index.opening, index.closing);\r\n            this.__realPos = str.length - 1 - index.closing;\r\n            let new_i;\r\n            if (checker.check(_str, blocks.openedBlock.mayCloseAt.ref.contentTest)) {\r\n               new_i = __parseBlock__(index, _str); /// __parseBlock__ returns the new_i\r\n               __parseBlocks__(new_i);\r\n            } else {\r\n               if (blocks.openedBlock.ref.mustClose) {\r\n                  sendError('block is not closed.', this.__realPos);\r\n               }\r\n               // the considered closingChar found is not compatible as content failed at the test, so continue shearching for another closing char\r\n               // so start just after the openingChar of the openedBlock.ref,,, \r\n               // new_i = index.opening;\r\n               this.__realPos -= _str.length;\r\n               __parseBlocks__(index.opening);\r\n            }\r\n\r\n         } else {\r\n            if (blocks.openedBlock.ref.mustClose) {\r\n               sendError('block is not closed.', this.__realPos);\r\n            } else {\r\n               let new_i = blocks.openedBlock.index + blocks.openedBlock.ref.openingChar.length;\r\n               this.__realPos -= (str.length - 1) - new_i;\r\n               blocks.openedBlock.ref.opened = false;\r\n               blocks.openedBlock = null;\r\n               __parseBlocks__(new_i);\r\n            }\r\n         }\r\n      }\r\n\r\n      //#endregion\r\n\r\n      return str;\r\n\r\n   }\r\n   __parseOperators(str, options, operations) {\r\n      /// RegExp: (var or num or block)(suffix)(op)(prefix)(var or num or block)\r\n      /// ((?:[a-zA-Z_]+\\d*)|(?:-?\\d+\\.?\\d*)|(?:-?\\d*\\.?\\d+))\\s*((?:\\+\\+))?\\s*((?:\\+))\\s*((?:\\+\\+|\\+|\\-))?\\s*((?:[a-zA-Z_]+\\d*)|(?:\\d+\\.?\\d*)|(?:\\d*\\.?\\d+))\r\n\r\n      //#region separators\r\n      //if (!_contains(str, ...operators)) str = str.replace(/\\s/g, '');\r\n      for (let s of options.separators) {\r\n         if (new RegExp(s.regex).test(str)) {\r\n            let name = this.__get;\r\n            let args = [];\r\n            let strs = str.split(s);\r\n            for (let str_ of strs) {\r\n               args.push(this.parse(str_, operations));\r\n            }\r\n            operations.set(name, new Node('separator', args, { name: s, length: args.length }));\r\n         }\r\n      }\r\n      //#endregion\r\n\r\n      //#region preparing ofr parsing process\r\n      let argTest = `${options.nameTest}|${options.numTest}|##${options.nameTest}##`;\r\n      let search = new RegExp(`^\\\\s*(${options.allRegex.suffixOperators})?\\\\s*(${options.allRegex.operators})\\\\s*(${options.allRegex.prefixOperators})?\\\\s*(${argTest})\\\\s*`),\r\n         intialSearch = new RegExp(`^\\\\s*(${options.allRegex.prefixOperators})?\\\\s*(${argTest})`),\r\n         finalSearch = new RegExp(`^\\\\s*(${options.allRegex.suffixOperators})\\\\s*$`);\r\n\r\n      let _str = '',\r\n         prevArg = {\r\n            name: null,\r\n            sn: null\r\n         };\r\n      //#endregion\r\n\r\n      //#region searchong for operators and parsing process\r\n      /// intial replacement\r\n      str = str.replace(intialSearch, (match, prefix, arg) => {\r\n         if (prefix) {\r\n            let a = arg,\r\n               b = 'prefixOperator',\r\n               c = prefix;\r\n            if (!isNaN(a)) {\r\n               /// number\r\n               let name = getRandomName();\r\n               let sn = new Node(\r\n                  b,\r\n                  new Node('number', [], { value: parseInt(a) }),\r\n                  { name: c }\r\n               );\r\n               operations.set(name, sn);\r\n               prevArg = { name, sn };\r\n            } else {\r\n               let found = false;\r\n               a.replace(`##${options.nameTest}##`, () => {\r\n                  found = true;\r\n               });\r\n               if (found) {\r\n                  /// operations\r\n                  let sn = new Node(\r\n                     b,\r\n                     operations.get(a), /// you can get it from operations but let's store it into prevArg.sn to speed our code a litte bit.\r\n                     { name: c }\r\n                  );\r\n                  operations.set(a, sn);\r\n                  prevArg.sn = { name: a, sn };\r\n               } else {\r\n                  /// varName\r\n                  let name = getRandomName();\r\n                  let sn = new Node(\r\n                     b,\r\n                     new Node('variable', [], { name: a }),\r\n                     { name: c }\r\n                  );\r\n                  operations.set(name, sn);\r\n                  prevArg = { name, sn };\r\n               }\r\n            }\r\n\r\n         } else {\r\n            let found = false;\r\n            arg.replace(`##${options.nameTest}##`, () => {\r\n               found = true;\r\n            });\r\n            if (found) {\r\n               prevArg = { name: arg, sn: operations.get(arg) };\r\n            } else {\r\n               prevArg = { name: arg };\r\n            }\r\n         }\r\n\r\n         return '';\r\n      });\r\n      let a;\r\n      while (a !== str) {\r\n         a = str;\r\n         /// if replacement is not implemented, str will sstill the same and while loop will close\r\n         str = str.replace(search, (match, suffix, op, prefix, arg) => {\r\n\r\n            if (!op) {\r\n               sendError('operators', 'invalid operators', str, null);\r\n            }\r\n\r\n            if (suffix) {\r\n               for (let i = 0; i < options.suffixOperators.length; i++) {\r\n                  if (options.suffixOperators[i].regex.test(suffix)) {\r\n                     /// creating an operations with type of  prefix operator,,, its arg is the prev arg\r\n                     let a = prevArg.name,\r\n                        b = 'suffixOperator',\r\n                        c = suffix;\r\n                     if (!isNaN(a)) {\r\n                        /// number\r\n                        let name = getRandomName();\r\n                        let sn = new Node(\r\n                           b,\r\n                           new Node('number', [], { value: parseInt(a) }),\r\n                           { name: c }\r\n                        );\r\n                        operations.set(name, sn);\r\n                        prevArg = { name, sn };\r\n                     } else {\r\n                        let found = false;\r\n                        a.replace(`##${options.nameTest}##`, () => {\r\n                           found = true;\r\n                        });\r\n                        if (found) {\r\n                           /// operations\r\n                           let sn = new Node(\r\n                              b,\r\n                              prevArg.sn, /// you can get it from operations but let's store it into prevArg.sn to speed our code a litte bit.\r\n                              { name: c }\r\n                           );\r\n                           operations.set(a, sn);\r\n                           prevArg.sn = sn;\r\n                        } else {\r\n                           /// varName\r\n                           let name = getRandomName();\r\n                           let sn = new Node(\r\n                              b,\r\n                              new Node('variable', [], { name: a }),\r\n                              { name: c }\r\n                           );\r\n                           operations.set(name, sn);\r\n                           prevArg = { name, sn };\r\n                        }\r\n                     }\r\n                  }\r\n               }\r\n            }\r\n\r\n            _str += prevArg.name + ' ' + op + ' ';\r\n\r\n            if (prefix) {\r\n               let a = arg,\r\n                  b = 'prefixOperator',\r\n                  c = prefix;\r\n               if (!isNaN(a)) {\r\n                  /// number\r\n                  let name = getRandomName();\r\n                  let sn = new Node(\r\n                     b,\r\n                     new Node('number', [], { value: parseInt(a) }),\r\n                     { name: c }\r\n                  );\r\n                  operations.set(name, sn);\r\n                  prevArg = { name, sn };\r\n               } else {\r\n                  let found = false;\r\n                  a.replace(`##${options.nameTest}##`, () => {\r\n                     found = true;\r\n                  });\r\n                  if (found) {\r\n                     /// operations\r\n                     let sn = new Node(\r\n                        b,\r\n                        operations.get(a), /// you can get it from operations but let's store it into prevArg.sn to speed our code a litte bit.\r\n                        { name: c }\r\n                     );\r\n                     operations.set(a, sn);\r\n                     prevArg.sn = { name: a, sn };\r\n                  } else {\r\n                     /// varName\r\n                     let name = getRandomName();\r\n                     let sn = new Node(\r\n                        b,\r\n                        new Node('variable', [], { name: a }),\r\n                        { name: c }\r\n                     );\r\n                     operations.set(name, sn);\r\n                     prevArg = { name, sn };\r\n                  }\r\n               }\r\n            } else {\r\n               let found = false;\r\n               arg.replace(`##${options.nameTest}##`, () => {\r\n                  found = true;\r\n               });\r\n               if (found) {\r\n                  prevArg = { name: arg, sn: operations.get(arg) };\r\n               } else {\r\n                  prevArg = { name: arg };\r\n               }\r\n            }\r\n\r\n            return '';\r\n\r\n         });\r\n      }\r\n      // final search\r\n      if (str !== '') {\r\n         str = str.replace(finalSearch, (match, suffix) => {\r\n\r\n            let a = prevArg.name,\r\n               b = 'suffixOperator',\r\n               c = suffix;\r\n            if (!isNaN(a)) {\r\n               /// number\r\n               let name = getRandomName();\r\n               let sn = new Node(\r\n                  b,\r\n                  new Node('number', [], { value: parseInt(a) }),\r\n                  { name: c }\r\n               );\r\n               operations.set(name, sn);\r\n               prevArg = { name, sn };\r\n            } else {\r\n               let found = false;\r\n               a.replace(`##${options.nameTest}##`, () => {\r\n                  found = true;\r\n               });\r\n               if (found) {\r\n                  /// operations\r\n                  let sn = new Node(\r\n                     b,\r\n                     prevArg.sn, /// you can get it from operations but let's store it into prevArg.sn to speed our code a litte bit.\r\n                     { name: c }\r\n                  );\r\n                  operations.set(a, sn);\r\n                  prevArg.sn = { name: a, sn };\r\n               } else {\r\n                  /// varName\r\n                  let name = getRandomName();\r\n                  let sn = new Node(\r\n                     b,\r\n                     new Node('variable', [], { name: a }),\r\n                     { name: c }\r\n                  );\r\n                  operations.set(name, sn);\r\n                  prevArg = { name, sn };\r\n               }\r\n            }\r\n\r\n            _str += prevArg.name;\r\n\r\n            return '';\r\n\r\n         });\r\n         if (str !== '') sendError('operators', 'invalid suffix operator at the end', '', null);\r\n      }\r\n      //#endregion\r\n\r\n      return _str;\r\n   }\r\n\r\n}","\r\n// for exmaple brackets and quotations\r\n//{ openingChar: '{', closingChar: '}', num: 0, opened: false }\r\nimport { regSpecialChars } from './global.js';\r\n\r\nexport default class block {\r\n\r\n   constructor(options = {}) {\r\n      options = {\r\n         ...options\r\n      };\r\n      Object.assign(this, options);\r\n\r\n      // these properties are deprecated and algorithms was enhanced :._.:\r\n      // this.opened = false; \r\n      // this.num = 0;\r\n   }\r\n   get id() {\r\n      return this._id;\r\n   }\r\n   set id(val) {\r\n      if (val instanceof RegExp) {\r\n         this._id = val;\r\n         this.regex = val;\r\n         this.regexStr = val.toString().slice(1, -1);\r\n      } else if (val instanceof Object) {\r\n         this._id = val;\r\n         if (val.openingChar && val.closingChar) {\r\n            val.contentTest = val.contentTest || 'all';\r\n            if (val.contentTest instanceof RegExp) {\r\n               val.contentTest = val.contentTest.toString().slice(1, -1);\r\n            } else if (val.contentTest === 'all') {\r\n               val.contentTest = '.*?';\r\n            } else {\r\n               val.contentTest = regSpecialChars(val.contentTest);\r\n            }\r\n            this.regexStr = `${regSpecialChars(val.openingChar)}(${val.contentTest})${regSpecialChars(val.closingChar)}`;\r\n            this.regex = new RegExp(this.regexStr);\r\n         }\r\n      } else {\r\n         this._id = val;\r\n         this.regex = new RegExp(regSpecialChars(val));\r\n         this.regexStr = val.toString();\r\n      }\r\n   }\r\n\r\n   get contentTest() {\r\n      return this._contentTest || 'all';\r\n   }\r\n   set contentTest(val) {\r\n      this._contentTest = val;\r\n   }\r\n}","import Math from './math.js';\r\n\r\nexport default {\r\n   Math,\r\n\r\n};","import { operator, separator, prefixOperator, suffixOperator } from '../operators.js';\r\nimport block from '../blocks.js';\r\nimport Node from '../Node.js';\r\nimport { prepareOptions, sendError, contains, getRandomName } from '../global.js';\r\n\r\nexport default class CustomMathParser {\r\n\r\n   constructor(options) {\r\n      this._options = {\r\n         autoMultSign: true,\r\n         vars: [], /// to be used in this case ::: ' 1 + var(2-5)' which is the same as ' 1+ var*(2-5)'\r\n         nameTest: '[a-zA-Z_]+\\\\d*',\r\n         numTest: '\\\\d+\\\\.?\\\\d*|\\\\d*\\\\.?\\\\d+',\r\n\r\n         prefixOperators: [\r\n            new prefixOperator({ id: '+' }),\r\n            new prefixOperator({ id: '-' }),\r\n         ],\r\n\r\n         suffixOperators: [\r\n            new suffixOperator({ id: '!' }),\r\n            new suffixOperator({ id: 'deg' }),\r\n            new suffixOperator({ id: 'rad' }),\r\n         ],\r\n\r\n         operators: [\r\n\r\n            new operator({ id: '^', zIndex: 10 }), // the first operator to process\r\n            new operator({ id: '*', zIndex: 9 }),\r\n            new operator({ id: '/', zIndex: 9 }),\r\n            new operator({ id: 'mod', zIndex: 9 }),\r\n            new operator({ id: '+', zIndex: 7 }),\r\n            new operator({ id: '-', zIndex: 7 }),\r\n            new operator({ id: '>>', zIndex: 6 }),\r\n            new operator({ id: '<<', zIndex: 6 }),\r\n            new operator({ id: '>=', zIndex: 5 }),\r\n            new operator({ id: '<=', zIndex: 5 }),\r\n            new operator({ id: '!=', zIndex: 5 }),\r\n            new operator({ id: '<', zIndex: 5 }),\r\n            new operator({ id: '>', zIndex: 5 }),\r\n            new operator({ id: '==', zIndex: 5 }),\r\n            new operator({ id: '&', zIndex: 4 }),\r\n            new operator({ id: 'band', zIndex: 4 }),\r\n            new operator({ id: '|', zIndex: 4 }),\r\n            new operator({ id: 'bor', zIndex: 4 }),\r\n            new operator({ id: 'bxor', zIndex: 4 }),\r\n            new operator({ id: 'constrain', zIndex: 4 }),\r\n            new operator({ id: 'in', zIndex: 3 }),\r\n            new operator({ id: 'out', zIndex: 3 }),\r\n            new operator({ id: 'xnor', zIndex: 1 }),\r\n            new operator({ id: 'xor', zIndex: 1 }),\r\n            new operator({ id: 'nand', zIndex: 1 }),\r\n            new operator({ id: 'nor', zIndex: 1 }),\r\n            new operator({ id: 'or', zIndex: 1 }),\r\n            new operator({ id: 'and', zIndex: 1 }),\r\n            new operator({ id: '||', zIndex: 1 }),\r\n            new operator({ id: '&&', zIndex: 1 }),\r\n            new operator({ id: '=', zIndex: 0 }) // the last operator to be applied\r\n\r\n         ],\r\n\r\n         separators: [\r\n            new separator({ id: ';' }),\r\n            new separator({ id: ',' }),\r\n         ],\r\n\r\n         blocks: [\r\n            new block({ id: { openingChar: '{', closingChar: '}' } }), /// multiNodable used to know whether or not the bracket block can have multiNode seperated be something like comma \",\"\r\n            new block({ id: { openingChar: '[', closingChar: ']' } }),\r\n            new block({ id: { openingChar: '(', closingChar: ')' } }),\r\n            new block({ id: { openingChar: '\"', closingChar: '\"' } }),\r\n            new block({ id: { openingChar: \"'\", closingChar: \"'\" } })\r\n         ],\r\n\r\n         forbiddenChars: [],\r\n\r\n      };\r\n      this.options = options;\r\n   }\r\n\r\n   get options() {\r\n      return this._options;\r\n   }\r\n\r\n   set options(options) {\r\n      options = Object.assign(this._options, options);\r\n      prepareOptions(options);\r\n   }\r\n\r\n   parse(str, operations = null) {\r\n      var options = this.options;\r\n      operations = operations instanceof Map ? operations : new Map();\r\n      //#region pre codes\r\n      for (let i = 0; i < options.forbiddenChars.length; i++) {\r\n         if (contains(str, options.forbiddenChars[i])) sendError('forbiddenSymbol', 'forbidden symbol.');\r\n      }\r\n      // if empty\r\n      str = str.replace(/\\s+/g, () => {\r\n         return ' ';\r\n      });\r\n\r\n      //#endregion\r\n      return this.__parse(str, options, operations);\r\n   }\r\n\r\n   __parse(str, options, operations, subOptions = {}) {\r\n\r\n      let snode;\r\n      subOptions = { parseBlocks: true, parseOperators: true, ...subOptions }; /// or use Object.assign\r\n\r\n      //#region parsing\r\n\r\n      // if empty of characters\r\n      str = str.replace(/^\\s*$/, () => {\r\n         snode = new Node('');\r\n      }); if (snode) return snode;\r\n\r\n      if (subOptions.parseBlocks) {\r\n         str = this.__parseBlocks(str, options, operations);\r\n      }\r\n      if (subOptions.parseOperators) {\r\n         str = this.__parseOperators(str, options, operations);\r\n      }\r\n\r\n      //#endregion\r\n\r\n      //#region the last thing in str,,, number or name or operationName \r\n\r\n      // if name of operation\r\n      str = str.replace(/^\\s*(.*)\\s*$/, '$1');\r\n\r\n      /// if number\r\n      if (!isNaN(str)) {\r\n         snode = new Node('number', [], { value: parseFloat(str) });\r\n      }\r\n\r\n      // if operation name\r\n      str = str.replace(options.operationTestReg, (opName) => {\r\n         snode = operations.get(opName);\r\n      }); if (snode) return snode;\r\n\r\n      // if literal (variable) or bool {true or false}, ...\r\n      str = str.replace(options.nameTestReg, (name) => {\r\n         snode = new Node('variable', [], { name });\r\n      }); if (snode) return snode;\r\n\r\n      //#endregion\r\n\r\n      // this shouldn't happen in ordinary cases, but this line of code is here for avoiding any flaw out of measurements\r\n      throw new Error('invalid script.\\n' + str);\r\n\r\n   }\r\n\r\n   /**\r\n    * this modified version of __parseBlocks is much better and faster,,, we have gotten rid of if statements and varaible and alot of code that are redundant\r\n    */\r\n   __parseBlocks(str, options, operations) {\r\n\r\n      //#region brackets\r\n\r\n      var blocks = options.blocks;\r\n\r\n      let b;\r\n      let repBlock = (match, content) => {\r\n         let name = getRandomName();\r\n         let sn = new Node('block', [this.__parse(content, options, operations)], { id: b.id });\r\n         operations.set(name, sn);\r\n         return name;\r\n      };\r\n\r\n      for (let i = 0; i < blocks.values.length; i++) {\r\n         b = blocks.values[i];\r\n         str = str.replace(b.regex, repBlock);\r\n      }\r\n\r\n      //#endregion\r\n\r\n      return str;\r\n   }\r\n\r\n   __parseOperators(str, options, operations) {\r\n      /// RegExp: (var or num or block)(suffix)(op)(prefix)(var or num or block)\r\n      /// ((?:[a-zA-Z_]+\\d*)|(?:-?\\d+\\.?\\d*)|(?:-?\\d*\\.?\\d+))\\s*((?:\\+\\+))?\\s*((?:\\+))\\s*((?:\\+\\+|\\+|\\-))?\\s*((?:[a-zA-Z_]+\\d*)|(?:\\d+\\.?\\d*)|(?:\\d*\\.?\\d+))\r\n\r\n      //#region separators\r\n      for (let s of options.separators) {\r\n         if (contains(str, s.id)) {\r\n            let name = this.__get;\r\n            let args = [];\r\n            let strs = str.split(s);\r\n            for (let str_ of strs) {\r\n               args.push(this.__parse(str_, options, operations));\r\n            }\r\n            operations.set(name, new Node('separator', args, { name: s.id, length: args.length }));\r\n         }\r\n      }\r\n      //#endregion\r\n\r\n      //#region preparing for parsing process\r\n      let _str = '',\r\n         prevArg = {\r\n            name: null,\r\n            sn: null\r\n         };\r\n      //#endregion\r\n\r\n      //#region searching for operators and parsing suffix and prefix\r\n\r\n      /// intial replacement\r\n      str = str.replace(options.opIntialTestReg, (match, prefix, arg) => {\r\n         if (prefix) {\r\n            let a = arg,\r\n               b = 'prefixOperator',\r\n               c = prefix;\r\n            if (!isNaN(a)) {\r\n               /// number\r\n               let name = getRandomName();\r\n               let sn = new Node(\r\n                  b,\r\n                  new Node('number', [], { value: parseInt(a) }),\r\n                  { name: c }\r\n               );\r\n               operations.set(name, sn);\r\n               prevArg = { name, sn };\r\n            } else {\r\n               let found = false;\r\n               a.replace(options.operationTestReg, () => {\r\n                  found = true;\r\n               });\r\n               if (found) {\r\n                  /// operations\r\n                  let sn = new Node(\r\n                     b,\r\n                     operations.get(a), /// you can get it from operations but let's store it into prevArg.sn to speed our code a litte bit.\r\n                     { name: c }\r\n                  );\r\n                  operations.set(a, sn);\r\n                  prevArg.sn = { name: a, sn };\r\n               } else {\r\n                  /// varName\r\n                  let name = getRandomName();\r\n                  let sn = new Node(\r\n                     b,\r\n                     new Node('variable', [], { name: a }),\r\n                     { name: c }\r\n                  );\r\n                  operations.set(name, sn);\r\n                  prevArg = { name, sn };\r\n               }\r\n            }\r\n\r\n         } else {\r\n            let found = false;\r\n            arg.replace(options.operationTestReg, () => {\r\n               found = true;\r\n            });\r\n            if (found) {\r\n               prevArg = { name: arg, sn: operations.get(arg) };\r\n            } else {\r\n               prevArg = { name: arg };\r\n            }\r\n         }\r\n\r\n         return '';\r\n      });\r\n\r\n      let end = false;\r\n      // inner search for operators\r\n      while (!end) {\r\n         end = true;\r\n         /// if replacement is not implemented, str will sstill the same and while loop will close\r\n         str = str.replace(options.opTestReg, (match, suffix, op, prefix, arg) => {\r\n\r\n            if (!op) {\r\n               sendError('operators', 'invalid operators', str, null);\r\n            }\r\n\r\n            if (suffix) {\r\n               /// creating an operations with type of  prefix operator,,, its arg is the prev arg\r\n               let a = prevArg.name,\r\n                  b = 'suffixOperator',\r\n                  c = suffix;\r\n               if (!isNaN(a)) {\r\n                  /// number\r\n                  let name = getRandomName();\r\n                  let sn = new Node(\r\n                     b,\r\n                     new Node('number', [], { value: parseInt(a) }),\r\n                     { name: c }\r\n                  );\r\n                  operations.set(name, sn);\r\n                  prevArg = { name, sn };\r\n               } else {\r\n                  let found = false;\r\n                  a.replace(options.operationTestReg, () => {\r\n                     found = true;\r\n                  });\r\n                  if (found) {\r\n                     /// operations\r\n                     let sn = new Node(\r\n                        b,\r\n                        prevArg.sn, /// you can get it from operations but let's store it into prevArg.sn to speed our code a litte bit.\r\n                        { name: c }\r\n                     );\r\n                     operations.set(a, sn);\r\n                     prevArg.sn = sn;\r\n                  } else {\r\n                     /// varName\r\n                     let name = getRandomName();\r\n                     let sn = new Node(\r\n                        b,\r\n                        new Node('variable', [], { name: a }),\r\n                        { name: c }\r\n                     );\r\n                     operations.set(name, sn);\r\n                     prevArg = { name, sn };\r\n                  }\r\n               }\r\n            }\r\n\r\n            _str += prevArg.name + ' ' + op + ' ';\r\n\r\n            if (prefix) {\r\n               let a = arg,\r\n                  b = 'prefixOperator',\r\n                  c = prefix;\r\n               if (!isNaN(a)) {\r\n                  /// number\r\n                  let name = getRandomName();\r\n                  let sn = new Node(\r\n                     b,\r\n                     new Node('number', [], { value: parseInt(a) }),\r\n                     { name: c }\r\n                  );\r\n                  operations.set(name, sn);\r\n                  prevArg = { name, sn };\r\n               } else {\r\n                  let found = false;\r\n                  a.replace(options.operationTestReg, () => {\r\n                     found = true;\r\n                  });\r\n                  if (found) {\r\n                     /// operations\r\n                     let sn = new Node(\r\n                        b,\r\n                        operations.get(a), /// you can get it from operations but let's store it into prevArg.sn to speed our code a litte bit.\r\n                        { name: c }\r\n                     );\r\n                     operations.set(a, sn);\r\n                     prevArg.sn = { name: a, sn };\r\n                  } else {\r\n                     /// varName\r\n                     let name = getRandomName();\r\n                     let sn = new Node(\r\n                        b,\r\n                        new Node('variable', [], { name: a }),\r\n                        { name: c }\r\n                     );\r\n                     operations.set(name, sn);\r\n                     prevArg = { name, sn };\r\n                  }\r\n               }\r\n            } else {\r\n               let found = false;\r\n               arg.replace(options.operationTestReg, () => {\r\n                  found = true;\r\n               });\r\n               if (found) {\r\n                  prevArg = { name: arg, sn: operations.get(arg) };\r\n               } else {\r\n                  prevArg = { name: arg };\r\n               }\r\n            }\r\n\r\n            end = false;\r\n            return '';\r\n         });\r\n      }\r\n\r\n      // final search\r\n      if (str !== '') {\r\n         str = str.replace(options.opFinalTestReg, (match, suffix) => {\r\n\r\n            let a = prevArg.name,\r\n               b = 'suffixOperator',\r\n               c = suffix;\r\n            if (!isNaN(a)) {\r\n               /// number\r\n               let name = getRandomName();\r\n               let sn = new Node(\r\n                  b,\r\n                  new Node('number', [], { value: parseInt(a) }),\r\n                  { name: c }\r\n               );\r\n               operations.set(name, sn);\r\n               prevArg = { name, sn };\r\n            } else {\r\n               let found = false;\r\n               a.replace(options.operationTestReg, () => {\r\n                  found = true;\r\n               });\r\n               if (found) {\r\n                  /// operations\r\n                  let sn = new Node(\r\n                     b,\r\n                     prevArg.sn, /// you can get it from operations but let's store it into prevArg.sn to speed our code a litte bit.\r\n                     { name: c }\r\n                  );\r\n                  operations.set(a, sn);\r\n                  prevArg.sn = { name: a, sn };\r\n               } else {\r\n                  /// varName\r\n                  let name = getRandomName();\r\n                  let sn = new Node(\r\n                     b,\r\n                     new Node('variable', [], { name: a }),\r\n                     { name: c }\r\n                  );\r\n                  operations.set(name, sn);\r\n                  prevArg = { name, sn };\r\n               }\r\n            }\r\n\r\n            _str += prevArg.name;\r\n\r\n            return '';\r\n\r\n         });\r\n         if (str !== '') sendError('operators', 'invalid suffix operator at the end', '', null);\r\n      } else {\r\n         _str += prevArg.name;\r\n      }\r\n\r\n      //#endregion\r\n\r\n      //#region parsing operators\r\n\r\n      for (let i = 0; i < options.operators.length; i++) {\r\n         end = false;\r\n         while (!end) {\r\n            end = true;\r\n            if (contains(_str, options.operators[i].id)) {\r\n               _str = _str.replace(new RegExp(`(${options.argTest})\\\\s*(${options.operators[i].regexStr})\\\\s*(${options.argTest})`), (match, g1, op, g2) => {\r\n                  //#region argument for the operator\r\n                  let arg1, arg2;\r\n                  if (!isNaN(g1)) {\r\n                     /// number\r\n                     arg1 = new Node('number', [], { value: parseInt(g1) });\r\n                  } else {\r\n                     let found = false;\r\n                     g1.replace(options.operationTestReg, () => {\r\n                        // operation\r\n                        arg1 = operations.get(g1);\r\n                        found = true;\r\n                     });\r\n                     if (!found) {\r\n                        /// varName\r\n                        arg1 = new Node('variable', [], { name: g1 });\r\n                     }\r\n                  }\r\n                  if (!isNaN(g2)) {\r\n                     /// number\r\n                     arg2 = new Node('number', [], { value: parseInt(g2) });\r\n                  } else {\r\n                     let found = false;\r\n                     g2.replace(options.operationTestReg, () => {\r\n                        // operation\r\n                        arg2 = operations.get(g2);\r\n                        found = true;\r\n                     });\r\n                     if (!found) {\r\n                        /// varName\r\n                        arg2 = new Node('variable', [], { name: g2 });\r\n                     }\r\n                  }\r\n                  //#endregion\r\n                  let name = getRandomName();\r\n                  operations.set(name, new Node('operator', [arg1, arg2], { name: op }));\r\n                  end = false;\r\n                  return name;\r\n               });\r\n            }\r\n            /// if the operator is not found,,, end the while loop.\r\n         }\r\n      }\r\n\r\n      //#endregion\r\n\r\n      return _str;\r\n   }\r\n\r\n}","\r\nimport { operator, separator, prefixOperator, suffixOperator } from './operators.js';\r\nimport block from './blocks.js';\r\n\r\nexport default new Map([\r\n   /**\r\n    * [key is env, value is options]\r\n    */\r\n\r\n   [\r\n      'new',\r\n      {\r\n         nameTest: '[a-zA-Z_]+\\\\d*',\r\n         numTest: '\\\\d+\\\\.?\\\\d*|\\\\d*\\\\.?\\\\d+',\r\n\r\n         operators: [],\r\n         suffixOperators: [],\r\n         prefixOperators: [],\r\n         blocks: [],\r\n      }\r\n   ],\r\n\r\n   [\r\n      \"math\",\r\n      {\r\n         nameTest: '[a-zA-Z_]+\\\\d*',\r\n         numTest: '\\\\d+\\\\.?\\\\d*|\\\\d*\\\\.?\\\\d+',\r\n\r\n         autoMultSign: true,\r\n         vars: [], /// to be used in this case ::: ' 1 + var(2-5)' which is the same as ' 1+ var*(2-5)'\r\n         prefixOperators: [\r\n            new prefixOperator({ name: '!' }),\r\n            new prefixOperator({ name: 'not' }),\r\n            new prefixOperator({ name: '~' }),\r\n            new prefixOperator({ name: '++' }),\r\n            new prefixOperator({ name: '--' }),\r\n            new prefixOperator({ name: '+' }),\r\n            new prefixOperator({ name: '-' }),\r\n            new prefixOperator({ name: 'bnot' })\r\n         ],\r\n\r\n         suffixOperators: [\r\n            new suffixOperator({ name: '!' }),\r\n            new suffixOperator({ name: '++' }),\r\n            new suffixOperator({ name: '--' }),\r\n         ],\r\n\r\n         operators: [\r\n\r\n            new operator({ name: '^', zIndex: 10 }), // the first operator to process\r\n            new operator({ name: '*', zIndex: 9 }),\r\n            new operator({ name: '/', zIndex: 9 }),\r\n            new operator({ name: 'mod', zIndex: 8 }),\r\n            new operator({ name: '+', zIndex: 7 }),\r\n            new operator({ name: '-', zIndex: 7 }),\r\n            new operator({ name: '>>', zIndex: 6 }),\r\n            new operator({ name: '<<', zIndex: 6 }),\r\n            new operator({ name: '>=', zIndex: 5 }),\r\n            new operator({ name: '<=', zIndex: 5 }),\r\n            new operator({ name: '!=', zIndex: 5 }),\r\n            new operator({ name: '=', zIndex: 5 }),\r\n            new operator({ name: '<', zIndex: 5 }),\r\n            new operator({ name: '>', zIndex: 5 }),\r\n            new operator({ name: '==', zIndex: 5 }),\r\n            new operator({ name: '&', zIndex: 4 }),\r\n            new operator({ name: 'band', zIndex: 4 }),\r\n            new operator({ name: '|', zIndex: 4 }),\r\n            new operator({ name: 'bor', zIndex: 4 }),\r\n            new operator({ name: 'bxor', zIndex: 4 }),\r\n            new operator({ name: 'constrain', zIndex: 4 }),\r\n            new operator({ name: 'in', zIndex: 3 }),\r\n            new operator({ name: 'out', zIndex: 3 }),\r\n            new operator({ name: 'xnor', zIndex: 1 }),\r\n            new operator({ name: 'xor', zIndex: 1 }),\r\n            new operator({ name: 'nand', zIndex: 1 }),\r\n            new operator({ name: 'nor', zIndex: 1 }),\r\n            new operator({ name: 'or', zIndex: 1 }),\r\n            new operator({ name: 'and', zIndex: 1 }),\r\n            new operator({ name: '||', zIndex: 1 }),\r\n            new operator({ name: '&&', zIndex: 1 }),\r\n            new operator({ name: '=', zIndex: 0 }) // the last operator to be applied\r\n\r\n         ],\r\n\r\n         separators: [\r\n            new separator({ name: ';' }),\r\n            new separator({ name: ',' }),\r\n         ],\r\n\r\n         blocks: [\r\n            new block({ openingChar: '{', closingChar: '}', num: 0, opened: false }), /// multiNodable used to know whether or not the bracket block can have multiNode seperated be something like comma \",\"\r\n            new block({ openingChar: '[', closingChar: ']', num: 0, opened: false }),\r\n            new block({ openingChar: '(', closingChar: ')', num: 0, opened: false }),\r\n            new block({ openingChar: '\"', closingChar: '\"', num: 0, opened: false }),\r\n            new block({ openingChar: \"'\", closingChar: \"'\", num: 0, opened: false })\r\n         ],\r\n\r\n         forbiddenChars: []\r\n      }\r\n   ]\r\n\r\n]);\r\n","export class forbiddenSymbolsError extends Error {\r\n   constructor(msg, pos) {\r\n      super(msg);\r\n      this.position = pos;\r\n      this.messsege = msg;\r\n   }\r\n}\r\n\r\nexport class operatorsError extends Error {\r\n   constructor(msg, pos) {\r\n      super(msg);\r\n      this.position = pos;\r\n      this.messsege = msg;\r\n   }\r\n}\r\n\r\nexport class blocksError extends Error {\r\n   constructor(msg, pos) {\r\n      super(msg);\r\n      this.position = pos;\r\n      this.messsege = msg;\r\n   }\r\n}\r\n\r\n","import * as Errors from './errors.js';\r\n\r\nexport function regSpecialChars(str) {\r\n   return str.replace(/[+*/.$^(){|}[\\]]/g, (match) => { return '\\\\' + match; });\r\n}\r\n\r\nexport function strTOreg(str) {\r\n   return new RegExp(regSpecialChars(str));\r\n}\r\n\r\nexport var specialRegex = {\r\n   regSpecialChars: /[+*/.$^(){}[\\]]/,\r\n   num: /(-?\\d+\\.?\\d*)|(-?\\d*\\.?\\d+)/,\r\n   // var: // var is removed as you should care about other letters in other langs that I don't know how to check for using regex\r\n};\r\n\r\nexport var checker = {\r\n\r\n   symbols: '!\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~' + \"'\",\r\n\r\n   isSymbol: c => (/(?:[$+<->^`|~\\xA2-\\xA6\\xA8\\xA9\\xAC\\xAE-\\xB1\\xB4\\xB8\\xD7\\xF7\\u02C2-\\u02C5\\u02D2-\\u02DF\\u02E5-\\u02EB\\u02ED\\u02EF-\\u02FF\\u0375\\u0384\\u0385\\u03F6\\u0482\\u058D-\\u058F\\u0606-\\u0608\\u060B\\u060E\\u060F\\u06DE\\u06E9\\u06FD\\u06FE\\u07F6\\u07FE\\u07FF\\u09F2\\u09F3\\u09FA\\u09FB\\u0AF1\\u0B70\\u0BF3-\\u0BFA\\u0C7F\\u0D4F\\u0D79\\u0E3F\\u0F01-\\u0F03\\u0F13\\u0F15-\\u0F17\\u0F1A-\\u0F1F\\u0F34\\u0F36\\u0F38\\u0FBE-\\u0FC5\\u0FC7-\\u0FCC\\u0FCE\\u0FCF\\u0FD5-\\u0FD8\\u109E\\u109F\\u1390-\\u1399\\u166D\\u17DB\\u1940\\u19DE-\\u19FF\\u1B61-\\u1B6A\\u1B74-\\u1B7C\\u1FBD\\u1FBF-\\u1FC1\\u1FCD-\\u1FCF\\u1FDD-\\u1FDF\\u1FED-\\u1FEF\\u1FFD\\u1FFE\\u2044\\u2052\\u207A-\\u207C\\u208A-\\u208C\\u20A0-\\u20BF\\u2100\\u2101\\u2103-\\u2106\\u2108\\u2109\\u2114\\u2116-\\u2118\\u211E-\\u2123\\u2125\\u2127\\u2129\\u212E\\u213A\\u213B\\u2140-\\u2144\\u214A-\\u214D\\u214F\\u218A\\u218B\\u2190-\\u2307\\u230C-\\u2328\\u232B-\\u2426\\u2440-\\u244A\\u249C-\\u24E9\\u2500-\\u2767\\u2794-\\u27C4\\u27C7-\\u27E5\\u27F0-\\u2982\\u2999-\\u29D7\\u29DC-\\u29FB\\u29FE-\\u2B73\\u2B76-\\u2B95\\u2B98-\\u2BFF\\u2CE5-\\u2CEA\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3004\\u3012\\u3013\\u3020\\u3036\\u3037\\u303E\\u303F\\u309B\\u309C\\u3190\\u3191\\u3196-\\u319F\\u31C0-\\u31E3\\u3200-\\u321E\\u322A-\\u3247\\u3250\\u3260-\\u327F\\u328A-\\u32B0\\u32C0-\\u33FF\\u4DC0-\\u4DFF\\uA490-\\uA4C6\\uA700-\\uA716\\uA720\\uA721\\uA789\\uA78A\\uA828-\\uA82B\\uA836-\\uA839\\uAA77-\\uAA79\\uAB5B\\uFB29\\uFBB2-\\uFBC1\\uFDFC\\uFDFD\\uFE62\\uFE64-\\uFE66\\uFE69\\uFF04\\uFF0B\\uFF1C-\\uFF1E\\uFF3E\\uFF40\\uFF5C\\uFF5E\\uFFE0-\\uFFE6\\uFFE8-\\uFFEE\\uFFFC\\uFFFD]|\\uD800[\\uDD37-\\uDD3F\\uDD79-\\uDD89\\uDD8C-\\uDD8E\\uDD90-\\uDD9B\\uDDA0\\uDDD0-\\uDDFC]|\\uD802[\\uDC77\\uDC78\\uDEC8]|\\uD805\\uDF3F|\\uD807[\\uDFD5-\\uDFF1]|\\uD81A[\\uDF3C-\\uDF3F\\uDF45]|\\uD82F\\uDC9C|\\uD834[\\uDC00-\\uDCF5\\uDD00-\\uDD26\\uDD29-\\uDD64\\uDD6A-\\uDD6C\\uDD83\\uDD84\\uDD8C-\\uDDA9\\uDDAE-\\uDDE8\\uDE00-\\uDE41\\uDE45\\uDF00-\\uDF56]|\\uD835[\\uDEC1\\uDEDB\\uDEFB\\uDF15\\uDF35\\uDF4F\\uDF6F\\uDF89\\uDFA9\\uDFC3]|\\uD836[\\uDC00-\\uDDFF\\uDE37-\\uDE3A\\uDE6D-\\uDE74\\uDE76-\\uDE83\\uDE85\\uDE86]|\\uD838[\\uDD4F\\uDEFF]|\\uD83B[\\uDCAC\\uDCB0\\uDD2E\\uDEF0\\uDEF1]|\\uD83C[\\uDC00-\\uDC2B\\uDC30-\\uDC93\\uDCA0-\\uDCAE\\uDCB1-\\uDCBF\\uDCC1-\\uDCCF\\uDCD1-\\uDCF5\\uDD10-\\uDD6C\\uDD70-\\uDDAC\\uDDE6-\\uDE02\\uDE10-\\uDE3B\\uDE40-\\uDE48\\uDE50\\uDE51\\uDE60-\\uDE65\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDED5\\uDEE0-\\uDEEC\\uDEF0-\\uDEFA\\uDF00-\\uDF73\\uDF80-\\uDFD8\\uDFE0-\\uDFEB]|\\uD83E[\\uDC00-\\uDC0B\\uDC10-\\uDC47\\uDC50-\\uDC59\\uDC60-\\uDC87\\uDC90-\\uDCAD\\uDD00-\\uDD0B\\uDD0D-\\uDD71\\uDD73-\\uDD76\\uDD7A-\\uDDA2\\uDDA5-\\uDDAA\\uDDAE-\\uDDCA\\uDDCD-\\uDE53\\uDE60-\\uDE6D\\uDE70-\\uDE73\\uDE78-\\uDE7A\\uDE80-\\uDE82\\uDE90-\\uDE95])/)\r\n      .test(c),\r\n\r\n   isEmoji: c => (/(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDED5\\uDEEB\\uDEEC\\uDEF4-\\uDEFA\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0D-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD71\\uDD73-\\uDD76\\uDD7A-\\uDDA2\\uDDA5-\\uDDAA\\uDDAE-\\uDDCA\\uDDCD-\\uDDFF\\uDE70-\\uDE73\\uDE78-\\uDE7A\\uDE80-\\uDE82\\uDE90-\\uDE95])/)\r\n      .test(c),\r\n\r\n   isWhiteSpace: c => (/[\\t-\\r \\x85\\xA0\\u1680\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000]/)\r\n      .test(c),\r\n\r\n   isNum: c => !isNaN(c),\r\n\r\n   isAlpha: c => !isNaN(c) && !checker.isSymbol(c),\r\n\r\n   spaced: c => !checker.isSymbol(c),\r\n\r\n   isVarName: function (str) {\r\n      let isvarname = true;\r\n      str.replace(/^\\s*(.*)\\d*\\s*$/, (Math, g1) => {\r\n         for (let c of g1) {\r\n            isvarname = this.isAlpha(c) || c === '_';\r\n            if (!isvarname) continue;\r\n         }\r\n      });\r\n   },\r\n\r\n   check: function (str, test) {\r\n      switch (test) {\r\n         case 'name':\r\n            return this.isVarName(str);\r\n         case 'num':\r\n            return !isNaN(str);\r\n         case 'all':\r\n            return true;\r\n         default:\r\n            if (test instanceof RegExp) {\r\n               return test.test(str);\r\n            } else {\r\n               console.log(`checking test \"${test}\" is not supported.`);\r\n               return true;\r\n            }\r\n      }\r\n   }\r\n\r\n};\r\n\r\nexport function sendError(type, msg, str = '', pos = undefined) {\r\n   // (new Array(pos)).fill('_')     is the same as     '_'.repeat(pos)\r\n   str = str || '';\r\n   str = str === '' ? '' : '\\n' + str + '\\n';\r\n   if (!isNaN(pos)) {\r\n      pos = (new Array(pos)).fill('_').join('') + '^';\r\n   } else if (pos) {\r\n      // here the text in parsing process is multi line.\r\n      pos = `position: ${pos}`;\r\n   } else {\r\n      // pos is a falsy value\r\n      pos = '';\r\n   }\r\n   msg = msg + str + pos;\r\n\r\n   switch (type) {\r\n      case 'forbiddenSymbols':\r\n         throw new Errors.forbiddenSymbolsError(msg);\r\n      case 'operators':\r\n         throw new Errors.operatorsError(msg);\r\n      case 'blocks':\r\n         throw new Errors.blocksError(msg);\r\n      default:\r\n         throw new Error(msg);\r\n   }\r\n\r\n}\r\n\r\nexport function prepareOptions(options) {\r\n\r\n   //#region all\r\n\r\n   //#region string\r\n\r\n   let all = {\r\n      operators: ' ',\r\n      prefixOperators: ' ',\r\n      suffixOperators: ' ',\r\n   };\r\n\r\n   let processArr = (arr) => {\r\n      if (arr && arr.length > 0) {\r\n         let _all = ' ';\r\n         for (let i = 0; i < arr.length; i++) {\r\n            let op = arr[i];\r\n            let repeated = false;\r\n            _all.replace(new RegExp(` \\\\(@(${op.regexStr}),#(\\\\d*)\\\\) `), (match, opName, opIndex) => {\r\n               Object.assign(arr[i], arr[parseInt(opIndex)]); // merging the repeated operators\r\n               arr.splice(parseInt(opIndex), 1); // removing the previous operator wiht the same name\r\n               repeated = true;\r\n               return ` (@${op.toString()},#${i}) `;\r\n            });\r\n            if (!repeated) _all += `(@${op.toString()},#${i}) `;\r\n         }\r\n         return _all;\r\n      }\r\n   };\r\n\r\n   all.operators = processArr(options.operators);\r\n   all.prefixOperators = processArr(options.prefixOperators);\r\n   all.suffixOperators = processArr(options.suffixOperators);\r\n\r\n   options.all = all;\r\n\r\n   //#endregion\r\n\r\n   //#region regex\r\n\r\n   all = {\r\n      operators: '',\r\n      prefixOperators: '',\r\n      suffixOperators: '',\r\n   };\r\n\r\n   processArr = (arr) => {\r\n      if (arr.length == 0) return '';\r\n      if (arr && arr.length > 0) {\r\n         let _all = '';\r\n         for (let i = 0; i < arr.length; i++) {\r\n            let op = arr[i];\r\n            // let repeated = false; /// it is done in string\r\n            _all += `${op.regexStr}|`;\r\n         }\r\n         return _all.slice(0, -1);\r\n      }\r\n   };\r\n\r\n   all.operators = processArr(options.operators);\r\n   all.prefixOperators = processArr(options.prefixOperators);\r\n   all.suffixOperators = processArr(options.suffixOperators);\r\n\r\n   options.allRegex = all;\r\n\r\n   //#endregion\r\n\r\n   //#endregion\r\n\r\n   //#region regex for search\r\n\r\n   options.nameTestReg = new RegExp(options.nameTestReg);\r\n   options.numTestReg = new RegExp(options.numTestReg);\r\n   options.argTest = `${options.nameTest}|${options.numTest}|##${options.nameTest}##`;\r\n   options.argTestReg = new RegExp(options.argTestReg);\r\n   options.operationTest = `##${options.nameTest}##`;\r\n   options.operationTestReg = new RegExp(options.operationTest);\r\n\r\n   options.opTestReg = new RegExp(`^\\\\s*(${options.allRegex.suffixOperators})?\\\\s*(${options.allRegex.operators})\\\\s*(${options.allRegex.prefixOperators})?\\\\s*(${options.argTest})\\\\s*`);\r\n   options.opIntialTestReg = new RegExp(`^\\\\s*(${options.allRegex.prefixOperators})?\\\\s*(${options.argTest})`);\r\n   options.opFinalTestReg = new RegExp(`^\\\\s*(${options.allRegex.suffixOperators})\\\\s*$`);\r\n\r\n   //#endregion\r\n\r\n   //#region final steps\r\n\r\n   // sort the array to be inversely according to zIndex property.\r\n   if (options.operators)\r\n      options.operators = options.operators.sort(function (a, b) {\r\n         return -(a.zIndex - b.zIndex); // the negative sign is for reverse the array;\r\n      });\r\n\r\n   options.blocks = {\r\n      values: options.blocks,\r\n      openedBlock: null\r\n   };\r\n\r\n   //#endregion\r\n\r\n}\r\n\r\nexport function contains(str, containedStr) {\r\n   return str.indexOf(containedStr) > -1;\r\n}\r\nexport function getRandomName() {\r\n   let num = 0;\r\n   /// randomNameNum is here to avoid getting the same random name if the code is implemented so fast\r\n   return \"##\" +\r\n      (Date.now() + getRandomName.randomNameNum++).toString(36)\r\n         .replace(new RegExp(num++, 'g'), 'a') /// I am using Regex for global replacement.\r\n         .replace(new RegExp(num++, 'g'), 'b')\r\n         .replace(new RegExp(num++, 'g'), 'c')\r\n         .replace(new RegExp(num++, 'g'), 'd')\r\n         .replace(new RegExp(num++, 'g'), 'e')\r\n         .replace(new RegExp(num++, 'g'), 'f')\r\n         .replace(new RegExp(num++, 'g'), 'g')\r\n         .replace(new RegExp(num++, 'g'), 'h')\r\n         .replace(new RegExp(num++, 'g'), 'i')\r\n         .replace(new RegExp(num++, 'g'), 'j') +\r\n      '##';\r\n}\r\ngetRandomName.randomNameNum = 0;","\r\nvar Parser = require('./Parser').default;\r\nvar CustomParsers = require('./customParsers/index').default;\r\n\r\nvar MagicalParser = { Parser, CustomParsers };\r\n\r\nmodule.exports = MagicalParser;","\r\nimport { regSpecialChars, checker } from './global.js';\r\n\r\n\r\nexport class commonOperator {\r\n   constructor(options) {\r\n      options = options || {};\r\n      options = { zIndex: 0, ...options }; // overriding default options by the passed options (options argument)\r\n      Object.assign(this, options);\r\n   }\r\n   get id() {\r\n      return this._id;\r\n   }\r\n   set id(val) {\r\n\r\n      if (!val || val === '') throw new Error('operator id can not be void or empty');\r\n\r\n      this._id = val;\r\n\r\n      // preparing regex for parsing process\r\n      if (val instanceof RegExp) {\r\n         this.regexStr = val.toString().slice(1, -1); // replacing special chars         \r\n      } else {\r\n         this.regexStr = regSpecialChars(val.toString()); // replacing special chars         \r\n      }\r\n      this.regex = new RegExp(this.regexStr);\r\n\r\n      // spaced property\r\n\r\n      this.spaced = {\r\n         right: checker.spaced(val[val.toString().length - 1]),\r\n         left: checker.spaced(val[0])\r\n      };\r\n\r\n   }\r\n\r\n   get spaced() {\r\n      return this._spaced;\r\n   }\r\n   set spaced(val) {\r\n      this._spaced = typeof val === 'object' ? Object.assign({}, val) : { right: val, left: val };\r\n   }\r\n\r\n   toString() {\r\n      return this.regexStr;\r\n   }\r\n}\r\n\r\nexport class operator extends commonOperator {\r\n   constructor(options) {\r\n      super(options);\r\n   }\r\n}\r\n\r\nexport class suffixOperator extends commonOperator {\r\n   constructor(options) {\r\n      super(options);\r\n   }\r\n}\r\n\r\nexport class prefixOperator extends commonOperator {\r\n   constructor(options) {\r\n      super(options);\r\n   }\r\n}\r\n\r\nexport class separator extends commonOperator {\r\n   constructor(options) {\r\n      super(options);\r\n   }\r\n}\r\n\r\n"],"sourceRoot":""}